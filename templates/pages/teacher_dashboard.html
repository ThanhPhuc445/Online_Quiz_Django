{% extends "base.html" %} {% load static %} {% block title %}T·ªïng quan - Gi√°o
vi√™n{% endblock %} {% block extra_css %}
<style>
  :root {
    --primary-soft: rgba(13, 110, 253, 0.1);
    --success-soft: rgba(25, 135, 84, 0.1);
    --warning-soft: rgba(255, 193, 7, 0.15);
    --info-soft: rgba(13, 202, 240, 0.1);
  }

  /* Hi·ªáu ·ª©ng th·∫ª Card */
  .card-dashboard {
    border: none;
    border-radius: 12px;
    box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    background-color: #fff;
  }
  .card-dashboard:hover {
    transform: translateY(-3px);
    box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.1);
  }

  /* Icon th·ªëng k√™ */
  .icon-shape {
    width: 56px;
    height: 56px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 12px;
    font-size: 1.75rem;
  }
  .bg-soft-primary {
    background-color: var(--primary-soft);
    color: #0d6efd;
  }
  .bg-soft-success {
    background-color: var(--success-soft);
    color: #198754;
  }
  .bg-soft-warning {
    background-color: var(--warning-soft);
    color: #ffc107;
  }
  .bg-soft-info {
    background-color: var(--info-soft);
    color: #0dcaf0;
  }

  /* Action Button Style */
  .btn-action-card {
    text-align: left;
    padding: 1.25rem;
    border: 1px solid #e9ecef;
    background: #fff;
    border-radius: 10px;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    color: #495057;
    text-decoration: none;
  }
  .btn-action-card:hover {
    border-color: #0d6efd;
    background-color: #f8f9fa;
    color: #0d6efd;
    transform: translateX(5px);
  }
  .btn-action-card i {
    font-size: 1.5rem;
    margin-right: 15px;
    width: 40px;
    text-align: center;
  }
</style>
{% endblock %} {% block content %}
<div
  class="container-fluid py-4"
  style="background-color: #f5f7fa; min-height: 100vh"
>
  <!-- HEADER SECTION -->
  <div class="d-flex justify-content-between align-items-end mb-4">
    <div>
      <h6 class="text-uppercase text-muted small fw-bold mb-1">Dashboard</h6>
      <h2 class="fw-bold text-dark mb-0">Xin ch√†o, {{ user.username }}! üëã</h2>
    </div>
    <div>
      <span
        class="badge bg-white text-dark border px-3 py-2 rounded-pill shadow-sm"
      >
        <i class="bi bi-calendar3 me-2"></i>{% now "d/m/Y" %}
      </span>
    </div>
  </div>

  <!-- TH·ªêNG K√ä (STATS) -->
  <div class="row g-3 mb-4">
    <div class="col-xl-3 col-sm-6">
      <div class="card card-dashboard h-100">
        <div class="card-body">
          <div class="d-flex align-items-center">
            <div class="icon-shape bg-soft-primary me-3">
              <i class="bi bi-bank"></i>
            </div>
            <div>
              <p class="text-muted mb-0 small text-uppercase fw-bold">
                Ng√¢n h√†ng c√¢u h·ªèi
              </p>
              <h3 class="fw-bold mb-0">{{ total_questions }}</h3>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-xl-3 col-sm-6">
      <div class="card card-dashboard h-100">
        <div class="card-body">
          <div class="d-flex align-items-center">
            <div class="icon-shape bg-soft-success me-3">
              <i class="bi bi-journal-check"></i>
            </div>
            <div>
              <p class="text-muted mb-0 small text-uppercase fw-bold">
                ƒê·ªÅ thi ƒë√£ t·∫°o
              </p>
              <h3 class="fw-bold mb-0">{{ total_quizzes }}</h3>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-xl-3 col-sm-6">
      <div class="card card-dashboard h-100">
        <div class="card-body">
          <div class="d-flex align-items-center">
            <div class="icon-shape bg-soft-warning me-3">
              <i class="bi bi-people"></i>
            </div>
            <div>
              <p class="text-muted mb-0 small text-uppercase fw-bold">
                L∆∞·ª£t tham gia
              </p>
              <h3 class="fw-bold mb-0">{{ total_attempts }}</h3>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-xl-3 col-sm-6">
      <div class="card card-dashboard h-100">
        <div class="card-body">
          <div class="d-flex align-items-center">
            <div class="icon-shape bg-soft-info me-3">
              <i class="bi bi-graph-up"></i>
            </div>
            <div>
              <p class="text-muted mb-0 small text-uppercase fw-bold">
                T·ªâ l·ªá ƒë√∫ng TB
              </p>
              <h3 class="fw-bold mb-0">{{ average_correct_rate }}%</h3>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- CONTENT AREA -->
  <div class="row g-4">
    <!-- C·ªòT TR√ÅI: DANH S√ÅCH ƒê·ªÄ THI (CHI·∫æM 8 PH·∫¶N) -->
    <div class="col-lg-8">
      <div class="card card-dashboard h-100">
        <div
          class="card-header bg-white py-3 d-flex justify-content-between align-items-center border-bottom-0"
        >
          <h5 class="fw-bold mb-0">
            <i class="bi bi-clock-history text-primary me-2"></i>ƒê·ªÅ thi g·∫ßn ƒë√¢y
          </h5>
          <a
            href="{% url 'quiz:quiz_list' %}"
            class="btn btn-sm btn-light text-primary fw-bold"
            >Xem t·∫•t c·∫£</a
          >
        </div>
        <div class="table-responsive">
          <table class="table table-hover align-middle mb-0">
            <thead class="bg-light text-secondary small text-uppercase">
              <tr>
                <th class="ps-4 border-0">T√™n ƒë·ªÅ thi</th>
                <th class="border-0">M√¥n h·ªçc</th>
                <th class="border-0">Ng√†y t·∫°o</th>
                <th class="text-end pe-4 border-0">Thao t√°c</th>
              </tr>
            </thead>
            <tbody class="border-top-0">
              {% for quiz in recent_quizzes %}
              <tr>
                <td class="ps-4">
                  <a
                    href="{% url 'quiz:quiz_edit' quiz.pk %}"
                    class="text-dark fw-bold text-decoration-none d-block"
                  >
                    {{ quiz.title }}
                  </a>
                  <span class="text-muted small">
                    <i class="bi bi-stopwatch"></i> {{ quiz.duration_minutes }}
                    ph√∫t
                  </span>
                </td>
                <td>
                  <span class="badge rounded-pill bg-light text-dark border">
                    {{ quiz.subject.name }}
                  </span>
                </td>
                <td class="text-muted small">
                  {{ quiz.created_at|date:"d/m/Y" }}
                </td>
                <td class="text-end pe-4">
                  <a
                    href="{% url 'quiz:quiz_edit' quiz.pk %}"
                    class="btn btn-sm btn-white border hover-lift text-secondary"
                    title="S·ª≠a"
                  >
                    <i class="bi bi-pencil"></i>
                  </a>
                </td>
              </tr>
              {% empty %}
              <tr>
                <td colspan="4" class="text-center py-5 text-muted">
                  <i class="bi bi-inbox display-4 opacity-25 mb-3 d-block"></i>
                  Ch∆∞a c√≥ ƒë·ªÅ thi n√†o
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- C·ªòT PH·∫¢I: T√ÅC V·ª§ NHANH (CHI·∫æM 4 PH·∫¶N) -->
    <div class="col-lg-4">
      <div class="card card-dashboard">
        <div class="card-header bg-white py-3 border-bottom-0">
          <h5 class="fw-bold mb-0">T√°c v·ª• qu·∫£n l√Ω</h5>
        </div>
        <div class="card-body pt-0">
          <div class="d-flex flex-column gap-3">
            <!-- N√∫t 1: T·∫°o ƒë·ªÅ (N·ªïi b·∫≠t) -->
            <a
              href="{% url 'quiz:quiz_create' %}"
              class="btn btn-primary btn-lg w-100 d-flex align-items-center justify-content-center shadow-sm"
            >
              <i class="bi bi-plus-circle-fill me-2"></i>T·∫°o ƒë·ªÅ thi m·ªõi
            </a>

            <hr class="my-1 text-muted opacity-25" />

            <!-- C√°c n√∫t ph·ª• d·∫°ng th·∫ª -->
            <a href="{% url 'quiz:question_list' %}" class="btn-action-card">
              <i class="bi bi-collection text-primary"></i>
              <div>
                <div class="fw-bold">Ng√¢n h√†ng c√¢u h·ªèi</div>
                <div class="small text-muted">Qu·∫£n l√Ω kho c√¢u h·ªèi</div>
              </div>
            </a>

            <a href="{% url 'quiz:question_import' %}" class="btn-action-card">
              <i class="bi bi-file-earmark-excel text-success"></i>
              <div>
                <div class="fw-bold">Import Excel</div>
                <div class="small text-muted">Nh·∫≠p c√¢u h·ªèi h√†ng lo·∫°t</div>
              </div>
            </a>

            <a
              href="{% url 'quiz:grading_dashboard' %}"
              class="btn-action-card"
            >
              <i class="bi bi-check2-square text-warning"></i>
              <div>
                <div class="fw-bold">Ch·∫•m t·ª± lu·∫≠n</div>
                <div class="small text-muted">Xem b√†i l√†m c·∫ßn ch·∫•m</div>
              </div>
            </a>
          </div>
        </div>
      </div>

      <!-- Banner nh·ªè ho·∫∑c M·∫πo (Trang tr√≠) -->
      <div class="card card-dashboard mt-4 bg-soft-primary border-0">
        <div class="card-body text-center p-4">
          <i class="bi bi-lightbulb-fill text-primary mb-2 fs-3"></i>
          <h6 class="fw-bold text-primary">M·∫πo nh·ªè</h6>
          <p class="small text-muted mb-0">
            B·∫°n c√≥ th·ªÉ import danh s√°ch c√¢u h·ªèi t·ª´ Excel ƒë·ªÉ ti·∫øt ki·ªám th·ªùi gian
            t·∫°o ƒë·ªÅ.
          </p>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
