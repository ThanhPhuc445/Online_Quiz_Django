<!-- templates/quiz_taking/question_form.html -->
{% extends 'base.html' %} {% block content %}
<div class="container my-5">
  <div class="row justify-content-center">
    <div class="col-lg-8">
      <div class="card shadow-sm">
        <div class="card-header bg-dark text-white">
          {# TỰ ĐỘNG THAY ĐỔI TIÊU ĐỀ #} {% if question %}
          <h2 class="mb-0">Chỉnh sửa câu hỏi</h2>
          {% else %}
          <h2 class="mb-0">Thêm câu hỏi mới</h2>
          {% endif %}
        </div>
        <div class="card-body">
          <form method="post">
            {% csrf_token %}

            <div class="mb-3">
              <label for="{{ form.subject.id_for_label }}" class="form-label"
                >{{ form.subject.label }}</label
              >
              {{ form.subject }}
            </div>
            <div class="mb-3">
              <label for="{{ form.text.id_for_label }}" class="form-label"
                >{{ form.text.label }}</label
              >
              {{ form.text }}
            </div>
            <div class="mb-3">
              <label for="{{ form.difficulty.id_for_label }}" class="form-label"
                >{{ form.difficulty.label }}</label
              >
              {{ form.difficulty }}
            </div>

            <hr class="my-4" />

            <h4>Các đáp án</h4>
            <p class="text-muted small">
              Nhập nội dung cho các đáp án và tick vào ô để chọn đáp án đúng.
            </p>

            {{ formset.management_form }} {% for answer_form in formset %}
            <div class="row align-items-center mb-3 p-2 border rounded">
              <div class="col-md-9">{{ answer_form.text }}</div>
              <div class="col-md-3">
                <div class="form-check">
                  {{ answer_form.is_correct }}
                  <label
                    for="{{ answer_form.is_correct.id_for_label }}"
                    class="form-check-label"
                    >{{ answer_form.is_correct.label }}</label
                  >
                </div>
              </div>
            </div>
            {% endfor %}

            <div class="d-flex justify-content-end mt-4">
              <a
                href="{% url 'quiz:question_list' %}"
                class="btn btn-secondary me-2"
                >Hủy</a
              >
              {# TỰ ĐỘNG THAY ĐỔI NÚT BẤM #}
              <button type="submit" class="btn btn-primary">
                {% if question %} Cập nhật {% else %} Lưu câu hỏi {% endif %}
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
